# Управление конфигурацией NixOS через Git

Этот репозиторий предназначен для централизованного управления конфигурацией NixOS. Идея заключается в том, чтобы хранить все настройки в Git, а в основном файле `/etc/nixos/configuration.nix` лишь ссылаться на конфигурацию из этого репозитория.

Это позволяет:
-   Легко переносить конфигурацию на другие машины.
-   Отслеживать изменения в конфигурации с помощью Git.
-   Быстро восстанавливать систему в случае сбоя.

## Как это работает

1.  **Клонирование репозитория:**
    Вы клонируете этот репозиторий на вашу машину. Рекомендуется размещать его в `/etc/nixos/` для простоты.
    ```bash
    git clone <URL репозитория> /etc/nixos/nixconf
    ```

2.  **Подключение к `configuration.nix`:**
    Ваш основной файл `/etc/nixos/configuration.nix` должен быть максимально простым. Его главная задача — импортировать конфигурацию из этого репозитория.

    Пример содержимого `/etc/nixos/configuration.nix`:
    ```nix
    { config, pkgs, ... }:

    {
      imports =
        [
          # Путь к главному файлу конфигурации из этого репозитория
          /etc/nixos/nixconf/settings.nix
        ];

    }
    ```

3.  **Применение конфигурации:**
    После этого, для применения любых изменений, сделанных в репозитории, достаточно выполнить стандартную команду:
    ```bash
    sudo nixos-rebuild switch
    ```
    Если вы внесли изменения в конфигурацию и запушили их в Git, на другой машине достаточно сделать `git pull` и пересобрать систему.

## Структура репозитория

-   `settings.nix`: Основной файл, который импортирует все остальные части конфигурации.
-   `home.nix`: Конфигурация для Home Manager (пользовательские пакеты, dotfiles).
-   `packages.nix`: Список системных пакетов.
-   `services.nix`: Системные сервисы.
-   `desktop.nix`: Настройки рабочего стола (i3, polybar).
-   `configs/`: "Dotfiles" и другие конфигурационные файлы, которые подключаются через `home.nix`.