# Конфигурация NixOS

Этот репозиторий содержит комплексную конфигурацию NixOS для настольной среды Linux, разработанную для сеанса i3 (X11). Конфигурация отдает приоритет последовательному и функциональному пользовательскому опыту.

## Обзор

Ядро этой конфигурации управляется через `settings.nix`, который организует установку общесистемных пакетов, включает основные службы и определяет среду рабочего стола по умолчанию.

### Настройка среды i3

- **i3 (X11):** это основной и стандартный сеанс рабочего стола, полностью настроенный для ежедневного использования. Он использует `polybar` для своей строки состояния, конфигурации которой находятся в каталоге `polybar/`.

### Ключевые файлы конфигурации

- `configuration.nix`: главный файл, который является точкой входа для конфигурации NixOS. Он должен импортировать `settings.nix`.
- `settings.nix`: центральный файл конфигурации NixOS, отвечающий за системные пакеты, службы и активацию оконного менеджера.
- `i3/config`: конфигурация для оконного менеджера i3, включая привязки клавиш, приложения для автозапуска и команды запуска Polybar.
- `hugo.nix` и `gns3.nix`: пользовательские переопределения или определения пакетов.

## Структура каталогов

- `i3/`: содержит файлы конфигурации для оконного менеджера i3.
- `polybar/`: скрипты конфигурации и запуска для строки состояния Polybar, используемой в i3.
- `.bashrc` и `.tmux.conf`: пользовательские конфигурации оболочки и мультиплексора терминала.

## Как использовать

Эта конфигурация NixOS разработана для поддержки через Git, что означает, что файлы конфигурации не должны копироваться напрямую в `/etc/nixos`. Вместо этого, репозиторий должен быть склонирован, а затем ваш основной файл `configuration.nix` должен импортировать нужные модули из склонированного репозитория.

Вот пошаговая инструкция:

1.  **Клонируйте репозиторий:**
    Клонируйте этот репозиторий в удобное для вас место, например:
    ```bash
    git clone <URL-вашего-репозитория> ~/nixconf
    ```
    Или, если вы предпочитаете хранить конфигурацию непосредственно в `/etc/nixos` и управлять ею как Git-репозиторием:
    ```bash
    sudo git clone <URL-вашего-репозитория> /etc/nixos/config-repo
    # И затем настроить импорт из /etc/nixos/config-repo
    ```
    Для простоты, в следующих шагах будем предполагать, что вы склонировали репозиторий в `/etc/nixos/config-repo`.

2.  **Настройте правильный канал NixOS:**
    Эта конфигурация рассчитана на использование NixOS 25.05. Убедитесь, что ваша система использует правильный канал, выполнив следующие команды:
    ```bash
    sudo nix-channel --remove nixos
    sudo nix-channel --add https://nixos.org/channels/nixos-25.05 nixos
    sudo nix-channel --update
    ```

3.  **Отредактируйте ваш основной `configuration.nix`:**
    Ваш основной файл конфигурации NixOS (обычно `/etc/nixos/configuration.nix`) должен импортировать `settings.nix` из склонированного репозитория. Откройте `/etc/nixos/configuration.nix` и убедитесь, что он содержит что-то вроде:
    ```nix
    # /etc/nixos/configuration.nix
    { config, pkgs, ... }:

    {
      imports = [
        # Указываем путь к вашему склонированному репозиторию
        /etc/nixos/config-repo/settings.nix
        # ... другие ваши модули
      ];

      # ... остальная часть вашей конфигурации
    }
    ```
    Если у вас нет `configuration.nix` или он пуст, вы можете создать его, импортировав `settings.nix` из склонированного репозитория.

4.  **Отредактируйте конфигурацию под себя:**
    Откройте файлы `/etc/nixos/config-repo/settings.nix` и `/etc/nixos/config-repo/home.nix` и измените имя пользователя `iershov` и домашний каталог `/home/iershov` на ваши собственные.

5.  **Пересоберите систему:**
    Примените новую конфигурацию с помощью команды:
    ```bash
    sudo nixos-rebuild switch
    ```
    Эта команда скачает все необходимые пакеты и применит все настройки.

**Примечание:** сеанс i3 установлен по умолчанию.